<div class="experiment-control-item">
  <div class="experiment-control-item-left align-items-center">
    <!-- If the item has some toggle function -->
    <mat-slide-toggle *ngIf="currentNode.onToggle" class="experiment-control-name" [checked]="currentNode.toggleState"
      (change)="currentNode.toggleSelfAndDescendants($event.checked)">
      <span [title]="currentNode.name">{{currentNode.name}}</span>
    </mat-slide-toggle>
    <!-- If the item has no toggle function -->
    <span *ngIf="!currentNode.onToggle" [title]="currentNode.name">{{currentNode.name}}</span>
  </div>
  <div class="experiment-control-item-right">
    <div *ngIf="currentNode.configs.length > 0">
      <div class="icon-wrapper item-settings" (click)="configActive = !configActive">
        <svg>
          <use href="assets/icons/gear.svg#gear"></use>
        </svg>
      </div>
      <div class="item-config-backdrop" *ngIf="configActive" (click)="configActive = false"></div>
      <div class="item-config" [hidden]="!configActive">
        <ng-container *ngFor="let config of currentNode.configs" [ngSwitch]="config.type">
          <!-- Config types -->
          <label class="item-config-single">
            <span class="item-config-label" *ngIf="config.type !== 'button'"
              [ngClass]="{ 'font-weight-bold': config.type === 'label' }">
              {{config.label}}
            </span>
            <div class="item-config-data">
              <app-config-checkbox *ngSwitchCase="'checkbox'" [isChecked]="config.isChecked"
                [onChange]="config.onChange">
              </app-config-checkbox>

              <app-config-slider *ngSwitchCase="'slider'" [onChange]="config.onChange" [min]="config.min"
                [max]="config.max" [step]="config.step" [allowCustomValue]="config.allowCustomValue">
              </app-config-slider>

              <button *ngSwitchCase="'button'" mat-button mat-stroked-button (click)="config.onClick()">
                {{config.label}}
              </button>

              <input *ngSwitchCase="'color'" type="color" value="#000000"
                (input)="config.onChange($event.target.value)" />
            </div>
          </label>
          <!-- Config types END -->
        </ng-container>
      </div>
    </div>
    <div class="icon-wrapper item-expand" *ngIf="currentNode.children.length > 0"
      (click)="childrenActive = !childrenActive" [ngClass]="{ 'expanded': childrenActive }">
      <svg>
        <use href="assets/icons/expand.svg#expand"></use>
      </svg>
    </div>
  </div>
</div>
<div class="experiment-control-children" *ngIf="childrenActive">
  <app-experiment-control-item *ngFor="let childNode of currentNode.children" [currentNode]="childNode">
  </app-experiment-control-item>
</div>
